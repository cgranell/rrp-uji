---
title: "During analysis &#183;<br/>Recommendations for open and reproducible research"
subtitle: "[2.1] Recomendations and practices"
author: "Carlos Granell"
institute: "Universitat Jaume I"
date: "April 2022"
description: "Reproducible Research Practices (RRP'23)"
output:
  xaringan::moon_reader:
    css: ["xaringan-themer.css", "custom.css"]
    seal: false
    lib_dir: libs
    nature:
      highlightStyle: github
      countIncrementalSlides: false
      ratio: "16:9"
---
name: title
class: Left, middle


```{r setup, include=FALSE}
options(htmltools.dir.version = FALSE)
# knitr::opts_chunk$set(collapse = TRUE,
#                       fig.retina = 3)

knitr::opts_chunk$set(
  fig.width=9, fig.height=3.5, fig.retina=3,
  out.width = "100%",
  cache = FALSE,
  echo = TRUE,
  message = FALSE, 
  warning = FALSE,
  hiline = TRUE
)


```

```{r xaringan-extra, echo=FALSE}
library(xaringanExtra)

xaringanExtra:::use_xaringan_extra(c("tile_view", "panelset", "share_again", "editable"))

xaringanExtra::style_share_again(
  share_buttons = c("twitter", "linkedin", "pocket"))
xaringanExtra::use_scribble(
  pen_color = "#d33f49", pen_size = 4)
```


```{r xaringan-themer, include=FALSE, warning=FALSE}
source("xaringan-themer.R")
```

```{r, load_refs, include=FALSE, cache=FALSE}
source("load_references.r")
```


# `r rmarkdown::metadata$title`

### `r rmarkdown::metadata$subtitle`

.large[`r rmarkdown::metadata$description` &#183; `r rmarkdown::metadata$date`]

.right[`r rmarkdown::metadata$author` &#183; Sergi Trilles]

.right[`r rmarkdown::metadata$institute`]


---
class: inverse, bottom, middle

## Karl Pooper's *Conjectures and Refutations*

.large[The ideas we can most trust are those that have been the most tried and tested]

???

[Karl Popper](https://en.wikipedia.org/wiki/Karl_Popper)


---
name: a1
class: inverse, center, middle

# .blue.bg-white[\#1]

# Be (data) FAIR, my friend

---
class: left
### Be (data) FAIR, my friend 

.huge[[Findable, Accesible, Interoperable, Reusable](https://www.go-fair.org/fair-principles/) for scientific data management and stewardship]

-   .large[Emphasis on data & metadata documentation `r cite("wilkinson2016")`]

-   .large[[How to GO FAIR](https://www.go-fair.org/how-to-go-fair/)]

<br/>

.large[**[What UJI recommends...](http://www.uji.es/upo/rest/contenido/630998650/raw?idioma=es)**]

---
class: left
### Be (data) FAIR, my friend


.pull-left[

```{r fair, out.width ='75%', fig.align='center', echo=FALSE}
knitr::include_graphics('images/fair-principles.png')
```

]

.pull-right[

.large[`r cite("pimentel2019")`  *`r title("pimentel2019")`*]

.large[They studied 1.4 millions of notebooks (GitHub)]

-   .large[Only 24% ran without exceptions] 
-   .large[Only 4% produced same results]

]



---
name: a2
class: inverse, center, middle

# .blue.bg-white[\#2]

# Use open source software whenever possible

---
class: left
### Open source software



.pull-left[

.huge[Instead of ]

-   .large[ArcGIS]
-   .large[Google Maps/Places]
-   .large[Stata, SPSS, Excel...]

]

--

.pull-right[

.huge[Pick]
-   .large[QGIS]
-   .large[OpenStreetMap]
-   .large[Python, R, ...]

]


--

.huge[Mixed approach to make the .blue[implicit] (analytical workflow) .gray.bg-blue[explicit]]

-   .large[[ArcGIS Python Notebooks](https://developers.arcgis.com/python/guide/using-the-jupyter-notebook-environment/)]

???

make implicit explicit means to make analytical workflow explicit instead of click-based analysis 

---
name: a3
class: inverse, center, middle

# .blue.bg-white[\#3]

# Learn/use scripting languages 

---
class: left
### Scripting languages 



.huge[Play with data, measure & explore, distrust of your intuition]


.huge[R/Python scripts describe every step of an analysis]

-   .large[Descriptive-based analysis (vs. click-based) of what the code does]

.huge[Others can understand (Remember: [_'Show me', not 'trust me'_](slides11_01.html#stark2018))]

-   .large[.gray.bg-blue[What] has been done & .gray.bg-blue[How] it has been done]

-   .large[See section *During analysis: best coding practices* `r cite("alston2021")`] 


---
name: a4
class: inverse, center, middle

# .blue.bg-white[\#4]

# Learn/use computational notebook formats

---
class:left 
### Computational notebook formats

.huge[Computational notebook is a virtual notebook .gray.bg-blue[environment] used for .gray.bg-blue[literate programming], which consists of cells of .gray.bg-blue[documentation], executable .gray.bg-blue[code], and .gray.bg-blue[results] as code output ([Wikipedia](https://en.wikipedia.org/wiki/Notebook_interface))]

-   .large[Jupyter, RMarkdown, Quarto, Matlab,...]

--

.huge[Notebooks as first-class citizens] 

-   .large[EarthCube annual meetings include a call for notebooks ([CFN 22](https://www.earthcube.org/post/call-for-notebooks-cfn-22)) as peer-reviewed submissions - See [Notebooks 2022 proceedings](https://github.com/earthcube2022)]

-   .large[Master/PhD theses as computational notebooks?]

???

Also in my class of Spatial Data Science

---
name: a5
class: inverse, center, middle

# .blue.bg-white[\#5]

# Learn/use version control systems


---
class: left
### Version control systems

.huge[Turn you project folder into a local version control repository]

-   .large[to keep track changes of your work]

-   .large[to provide a complete historical log of your project]

-   .large[to handle properly text formats (code, text documents, markdown documents) as opposed to rich/binary formats (Word)] 

---
class: left
### Version control systems
  
.huge[Tools]: 

-   .large[SVN, Mercurial, [Git](https://git-scm.com/)]

.huge[Readings]: 

-   .large[[Getting started with git](https://git-scm.com/book/en/v2/Getting-Started-Installing-Git)]
-   .large[[An introduction to Git: what it is, and how to use it](https://www.freecodecamp.org/news/what-is-git-and-how-to-use-it-c341b049ae61/)]
-   .large[`r cite("perez2016")`, `r cite("bryan2020")`]

---
name: a6
class: inverse, center, middle

# .blue.bg-white[\#6]

# Use online (Git) repository hosting services

---
class: left
### Online (Git) repository hosting services

.huge[Easier for individuals and teams to use Git for version control and collaboration]

-   .large[VCS + collaborative features + development support features]

.huge[Tools]: .large[[GitLab](https://about.gitlab.com/), [Bitbucket](https://bitbucket.org/), [GitHub](https://github.com/)]

.huge[Readings]: 

-   .large[[Cookiecutter Data Science: Best practices for organising your repository for easy version control](https://drivendata.github.io/cookiecutter-data-science/)]

-   .large[`r cite("perez2016")`, `r cite("bryan2020")`]

---
name: a7
class: inverse, center, middle

# .blue.bg-white[\#7]

# Learn/use containerisation tools


---
class: left
### Containerisation tools


.pull-left[

.large[[Docker](https://www.docker.com/) and family tools `r cite("nust2020-docker")`]

.large[[Binder](https://mybinder.org/) deploys a cloud-based docker container based on a git repo]

.large[[`repo2docker`](https://github.com/jupyterhub/repo2docker) fetches a git repository and builds a container image based on the configuration files found in the repository]

]

.pull-right[


```{r nust2020-docker, out.width ='90%', fig.align='center', echo=FALSE}
knitr::include_graphics('https://journals.plos.org/ploscompbiol/article/figure/image?size=large&id=10.1371/journal.pcbi.1008316.g002
')
```

]


---
name: a8
class: inverse, center, middle

# .blue.bg-white[\#8]

# Be (software) FAIR, my friend

---
class: left
### Be (software) FAIR, my friend

.huge[Document your source code `r cite(c("barker2022", "hasselbring2020"))`] 

-   .large[**Findable**: Deposit source code in a repository that provides DOIs and metadata]

-   .large[**Accessible**: Provide the opportunity to download the source code in bulk form]

-   .large[**Interoperable**: Use open source programming languages and software]


-   .large[**Reusable**: Release the software under a clear and open usage license]

--

.huge[Cite software properly `r cite("smith2016")` - [Basic #11](slides21_01.html#b11)]


---
name: a9
class: inverse, center, middle

# .blue.bg-white[\#9]

# Make use of *Make*


---
class: left
### Make use of *Make*

.huge[[GNU Make](https://www.gnu.org/software/make/) is +40 years old but still relevant today] 

-   .large[coordinates and automates command-line processes, such as a series of independent scripts]

-   .large[provides “one-entry” point to your analysis]

.huge[Readings]

-   .large[[Reproducibility with Make](https://the-turing-way.netlify.app/reproducible-research/make.html)]

-   .large[[SnakeMake](https://snakemake.readthedocs.io/en/stable/): Python alternative to Make]


---
name: summary
class: inverse, center, middle

# Summary

---

1.    .large[[Be (data) FAIR, my friend](#a1)]

1.    .large[[Use open source software whenever possible](#a2)]

1.    .large[[Learn/use scripting languages](#a3)]

1.    .large[[Learn/use computational notebook formats](#a4)]

1.    .large[[Learn/use version control (Git)](#a5)]

1.    .large[[Use online repository hosting services](#a6)]

1.    .large[[Learn/use containerisation tools](#a7)]

1.    .large[[Be (software) FAIR, my friend](#a8)]

1.    .large[[Make use of *Make*](#a9)]


---

# References

.tiny[
```{r print_refs1, echo=FALSE, results="asis"}
print(start = 1, end = 9)
```
]

